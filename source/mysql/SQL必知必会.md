# SQL必知必会

- 索引
    - SQL索引用B+树实现, 树的一个节点就是一次IO 
    - 索引存储在硬盘, 索引本身也比较大, 不能一次性读到内存中, 因此索引读取过程中会产生磁盘IO损耗
    - 索引优化是查询性能优化最有效的手段
    - 聚集索引: 物理上的连续存在
        - 例子: 字典的拼音索引

    - 非聚集索引: 逻辑上的连续存在, 物理存储上不连续
        - 例子: 字典的偏旁部首索引

    - 索引提高了SELETE查询和WHERE子句速度, 却降低了包含UPDATE或INSERT语句的数据输入过程的速度.
    - 索引的创建和产生不会对表中的数据产生影响
    - 索引是另外存储在硬盘上, 所以对是索引的列查询速度很快; 对非索引的列用WHERE子句查询, 会进行全表查询, 速度很慢. 用explain语句根据type的值可以看到.
    - 常见问题:
        - 无索引
        - 隐式转换  
    - 建索引的几大原则:
        - 最左前缀原则
        - =和in可以乱序
        - 尽量选择区分度高的列作为索引, 即选择度
        - 索引列不能参与计算, 要保持列的干净
        - 尽量的扩展索引, 不要新建索引

    - 覆盖索引
        - 如果索引本身包含了要查询的字段的值, 则称为覆盖索引
        - MySQL只使用B-Tree作为覆盖索引 

- 插入操作和一般的更新操作很少出现性能问题, 问题最多的是一些复杂的查询操作.

- 访问磁盘的成本大概是访问内存的十万倍

- 语法:
    - 加```\G```可以把结果旋转90度
    - 查看索引, ```show index from u_user \G;```