## 常用命令总结

- 创建仓库
    * ```git init```

- 查看状态
    * ```git status```
    * ```git statsu -s```, 简短形式, s for short

- 查看提交
    * ```git log```
    * ```git log --pretty=oneline```, 一行显示每条记录

- 暂存
    * ```git add xxx```
    * ```git add -A```, 暂存所有

- 查看已暂存和未暂存的修改
    * ```git diff```, 查看已暂存和未暂存的修改
    * ```git diff --staged```, 只查看已暂存的修改

- 提交
    * ```git commit -m "xxx"```, 提交并注释
    * ```git commit -a -m "xxx"```, 跳过暂存, 直接提交, 但是没有被追踪的文件不会被提交


- 撤销
    * 情况一: 当commit之后, 发现有相关的文件没有一起commit, 这时候把相关的文件暂存, 再使用```git commit --amend```命令, 把暂存区的文件提交到上一次的提交
    * 情况二: 暂存后, 发现有一个文件不应该被暂存, 使用```git reset HEAD 文件名```来取消该文件名的暂存(这个在图形界面很简单实现)
    * 情况三: 修改一个文件后, 想要撤销修改, 及暂存前, 想要回到修改前的样子, 执行```git checkout -- 文件名```, 注意这个命令比较危险, 他会使得所做的修改完全消失, 不能恢复.

- 远程库
    * ```git remote```, 查看远程库名字, 默认是origin
    * ```git remote add origin(可以用其他名字) url```, 添加远程库, url的例子: ```https://github.com/GrandG/sphinx.git```
    * ```git push -u origin 分支名```, 上传分支到远程库

- 打标签
    * ```git tag```, 列出当前标签
    * ```git tag -l 'v.1.8.5*'```, 列出1.8.5相关的标签
    * ```git tag 标签名```, 创建标签
    * ```git tag -a 标签名 -m "注释"```, 创建标签, 附带注释
    * ```git tag -a 标签名 commit-hash```, 对历史提交创建标签
    * ```git show 标签名```, 查看某一标签
    * ```git push origin 标签名```, 上传标签到远程库
    * ```git push origin --tags```, 上传所有标签到远程库
    * ```git checkout 标签名```, 切换到特定标签
    * 个人觉得标签应该结合gitflow来使用.

- 分支
    * ```git branch```, 查看所有分支
    * ```git branch 分支名```, 创建新分支
    * ```git checkout 分支名```, 切换到分支
    * ```git checkout -b 分支名```, 新建并切换到分支上
    * ```git merge 分支名```
        + 如果接受合并的分支, 相对于要被合并的分支没有新的提交, 会使用fast forward合并
    ![快速合并](../_static/git/常用命令总结/ff_merge.png)
        + 如果接受合并的分支, 相对于要被合并的分支有新的提交, 会使用三方合并, 叫做merge commit(合并提交)
    ![合并提交前](../_static/git/常用命令总结/before_merge_commit.png)
    ![合并提交前](../_static/git/常用命令总结/after_merge_commit.png)
    * ```git merge --no-ff 分支名```, no fast forward合并
    ![非快速合并](../_static/git/常用命令总结/no_ff_merge.png) 

    * ```git branch -d 分支名```, 删除分支

- 变基
    * 变基和合并作用差不多, 只是合并提交后, 会产生一个新的提交点, 而变基不会产生新的提交点, 所以不同点仅在于让提交记录比较好看.
    * 例子
    ```
        git checkout 分支1 # 切换到要被合并的分支
        git rebase 分支2   # 把分支1合并到分支2
        git checkout 分支2 # 切换到分支2
        git merger 分支1   # fast forward合并
    ```

